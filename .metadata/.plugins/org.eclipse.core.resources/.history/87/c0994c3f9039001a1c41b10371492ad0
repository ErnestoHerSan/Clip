package com.clip.apiTest;


import java.util.logging.Logger;

import org.junit.Assert;
import org.junit.Test;

import com.clip.model.ApiResponseGetList;
import com.google.gson.Gson;

import io.restassured.RestAssured;
import io.restassured.response.Response;
import io.restassured.specification.RequestSpecification;

public class TestGetList {

	Logger Log = Logger.getLogger("TestGetList");
	String url="https://clip-automation-practice.free.beeceptor.com";

	@Test 
	public void requestaGetListCode() {
		RestAssured.baseURI = url;
		RequestSpecification httpRequest = RestAssured.given();
		Response response = httpRequest.get("/getList");
		int statusCode = response.getStatusCode();
		System.out.println(response.asString());
		Log.info("C贸digo respuesta: "+statusCode);
		Assert.assertEquals(200, statusCode);
	}

	@Test
	public void requestbGetListAge() {
		RestAssured.baseURI = url;
		RequestSpecification httpRequest = RestAssured.given();
		Response response = httpRequest.get("/getList");
		Gson gson = new Gson();
		ApiResponseGetList[] persons = gson.fromJson(response.asString(),ApiResponseGetList[].class);
		Log.info("C贸digo respuesta: "+persons[1].age);
		Assert.assertEquals(26, persons[1].age);
	}

	@Test
	public void requestcGetListName() {
		RestAssured.baseURI = url;
		RequestSpecification httpRequest = RestAssured.given();
		Response response = httpRequest.get("/getList");
		Gson gson = new Gson();
		ApiResponseGetList[] persons = gson.fromJson(response.asString(),ApiResponseGetList[].class);
		Log.info("C贸digo respuesta: "+persons[0].name);
		Assert.assertEquals("Pedro", persons[0].name);
	}

	@Test
	public void requestdGetListSurname() {
		RestAssured.baseURI = url;
		RequestSpecification httpRequest = RestAssured.given();
		Response response = httpRequest.get("/getList");
		Gson gson = new Gson();
		ApiResponseGetList[] persons = gson.fromJson(response.asString(),ApiResponseGetList[].class);
		Log.info("C贸digo respuesta: "+persons[2].surname);
		Assert.assertEquals("Diana", persons[2].surname);
	}

}
